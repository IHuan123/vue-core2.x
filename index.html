<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./dist/vue.js"></script>
  </head>
  <body>
    <div id="root">
        {{ message }}---{{ count }}
        <button @click="add">add</button>
        <h1>array methods</h1>
        <ul>
          <li v-for="item in list" :key="item.key">
            current: {{item}}
            <button @click="removeList(item)">-</button>
          </li>
          <button @click="addList">+</button>
        </ul>
        <!-- <component-a @test="customEvent"></component-a> -->
    </div>
  </body>
  <script>
    // const events = new Vue()
    // console.log("events",events)
    // events.$on("testEvent",()=>{
    //   console.log("eventbus")
    // })
    // 可以在new Vue中直接写el，或者new Vue().$mount(id)
    var ComponentA = { 
      template:"<i @click='f'>custom Component</i>",
      methods:{
        f(){
          this.$emit("test")
          // events.$emit("testEvent")
        }
      }
     }
     var tMixin = {
      mounted(){
        console.log("mixin")
      }
     }
    const vm = new Vue({
      el: document.getElementById("root"),
      components:{"component-a":ComponentA},
      // mixins:[tMixin],
      // props:{
      //   message:{
      //     type:String,
      //     default:"this is props message"
      //   }
      // },
      // template:`<div>template --- {{message}}</div>`,
      data:{
        message:"this is data message",
        count:1,
        list:[{value:1,key:1},{value:2,key:2},{value:3,key:3},{value:4,key:4}]
      },
      computed:{
        // message(){
        //   return "this is computed message"
        // }
      },
      mounted(){
        console.log("####################### mounted")

      },
      methods:{
        add(){
          this.count ++
        },
        addList(){
          let last = this.list[this.list.length-1].value + 1
          this.list.push({value:last,key:last})
        },
        removeList(item){
          let index = this.list.indexOf(item)
          if(index>-1){
            this.list.splice(index,1)
          }
        },
        customEvent(){
          console.log("this.$emit",this)
        }
      }
    })
    // .$mount("#root")
    console.log("vm",vm)
  </script>
</html>
